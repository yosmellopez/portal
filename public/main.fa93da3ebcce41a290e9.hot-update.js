webpackHotUpdate("main",{

/***/ "./frontend/app/core/auth/user-route-access-service.ts":
/*!*************************************************************!*\
  !*** ./frontend/app/core/auth/user-route-access-service.ts ***!
  \*************************************************************/
/*! exports provided: UserRouteAccessService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UserRouteAccessService\", function() { return UserRouteAccessService; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm2015/core.js\");\n/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ \"./node_modules/@angular/router/fesm2015/router.js\");\n/* harmony import */ var app_core_auth_account_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! app/core/auth/account.service */ \"./frontend/app/core/auth/account.service.ts\");\n/* harmony import */ var app_core_login_login_modal_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! app/core/login/login-modal.service */ \"./frontend/app/core/login/login-modal.service.ts\");\n/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ \"./node_modules/rxjs/_esm2015/operators/index.js\");\nvar _a, _b, _c;\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet UserRouteAccessService = class UserRouteAccessService {\r\n    constructor(router, loginModalService, accountService) {\r\n        this.router = router;\r\n        this.loginModalService = loginModalService;\r\n        this.accountService = accountService;\r\n    }\r\n    canActivate(route, state) {\r\n        const authorities = route.data['authorities'];\r\n        // We need to call the checkLogin / and so the accountService.identity() function, to ensure,\r\n        // that the client has a principal too, if they already logged in by the server.\r\n        // This could happen on a page refresh.\r\n        return this.checkLogin(authorities, state.url);\r\n    }\r\n    checkLogin(authorities, url) {\r\n        const result = this.accountService.identity(true).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__[\"map\"])(account => {\r\n            console.log(account);\r\n            if (account) {\r\n                if (!authorities || authorities.length === 0) {\r\n                    return true;\r\n                }\r\n                const hasAnyAuthority = this.accountService.hasAnyAuthority(authorities);\r\n                if (hasAnyAuthority) {\r\n                    return true;\r\n                }\r\n                if (Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"isDevMode\"])()) {\r\n                    console.error('User has not any of required authorities: ', authorities);\r\n                }\r\n                this.router.navigate(['accessdenied']);\r\n                return false;\r\n            }\r\n            else {\r\n                this.router.navigate(['/login']);\r\n                return false;\r\n            }\r\n        }));\r\n        result.subscribe();\r\n        return result;\r\n    }\r\n    canActivateChild(childRoute, state) {\r\n        const authorities = childRoute.data['authorities'];\r\n        return this.checkLogin(authorities, state.url);\r\n    }\r\n};\r\nUserRouteAccessService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\r\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({ providedIn: 'root' }),\r\n    tslib__WEBPACK_IMPORTED_MODULE_0__[\"__metadata\"](\"design:paramtypes\", [typeof (_a = typeof _angular_router__WEBPACK_IMPORTED_MODULE_2__[\"Router\"] !== \"undefined\" && _angular_router__WEBPACK_IMPORTED_MODULE_2__[\"Router\"]) === \"function\" ? _a : Object, typeof (_b = typeof app_core_login_login_modal_service__WEBPACK_IMPORTED_MODULE_4__[\"LoginModalService\"] !== \"undefined\" && app_core_login_login_modal_service__WEBPACK_IMPORTED_MODULE_4__[\"LoginModalService\"]) === \"function\" ? _b : Object, typeof (_c = typeof app_core_auth_account_service__WEBPACK_IMPORTED_MODULE_3__[\"AccountService\"] !== \"undefined\" && app_core_auth_account_service__WEBPACK_IMPORTED_MODULE_3__[\"AccountService\"]) === \"function\" ? _c : Object])\r\n], UserRouteAccessService);\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9mcm9udGVuZC9hcHAvY29yZS9hdXRoL3VzZXItcm91dGUtYWNjZXNzLXNlcnZpY2UudHM/MTI3NiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW9EO0FBUTNCO0FBRW9DO0FBQ1E7QUFFdEI7QUFJL0MsSUFBYSxzQkFBc0IsR0FBbkMsTUFBYSxzQkFBc0I7SUFDL0IsWUFBb0IsTUFBYyxFQUFVLGlCQUFvQyxFQUFVLGNBQThCO1FBQXBHLFdBQU0sR0FBTixNQUFNLENBQVE7UUFBVSxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQVUsbUJBQWMsR0FBZCxjQUFjLENBQWdCO0lBQ3hILENBQUM7SUFFRCxXQUFXLENBQUMsS0FBNkIsRUFBRSxLQUEwQjtRQUNqRSxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzlDLDZGQUE2RjtRQUM3RixnRkFBZ0Y7UUFDaEYsdUNBQXVDO1FBQ3ZDLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFRCxVQUFVLENBQUMsV0FBcUIsRUFBRSxHQUFXO1FBQ3pDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FDbEQsMERBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckIsSUFBSSxPQUFPLEVBQUU7Z0JBQ1QsSUFBSSxDQUFDLFdBQVcsSUFBSSxXQUFXLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtvQkFDMUMsT0FBTyxJQUFJLENBQUM7aUJBQ2Y7Z0JBQ0QsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ3pFLElBQUksZUFBZSxFQUFFO29CQUNqQixPQUFPLElBQUksQ0FBQztpQkFDZjtnQkFDRCxJQUFJLCtEQUFTLEVBQUUsRUFBRTtvQkFDYixPQUFPLENBQUMsS0FBSyxDQUFDLDRDQUE0QyxFQUFFLFdBQVcsQ0FBQyxDQUFDO2lCQUM1RTtnQkFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLE9BQU8sS0FBSyxDQUFDO2FBQ2hCO2lCQUFNO2dCQUNILElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztnQkFDakMsT0FBTyxLQUFLLENBQUM7YUFDaEI7UUFDTCxDQUFDLENBQUMsQ0FDTCxDQUFDO1FBQ0YsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25CLE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxVQUFrQyxFQUFFLEtBQTBCO1FBQzNFLE1BQU0sV0FBVyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDbkQsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkQsQ0FBQztDQUNKO0FBM0NZLHNCQUFzQjtJQURsQyxnRUFBVSxDQUFDLEVBQUMsVUFBVSxFQUFFLE1BQU0sRUFBQyxDQUFDOytGQUVELHNEQUFNLG9CQUFOLHNEQUFNLG9EQUE2QixvRkFBaUIsb0JBQWpCLG9GQUFpQixvREFBMEIsNEVBQWMsb0JBQWQsNEVBQWM7R0FEL0csc0JBQXNCLENBMkNsQztBQTNDa0MiLCJmaWxlIjoiLi9mcm9udGVuZC9hcHAvY29yZS9hdXRoL3VzZXItcm91dGUtYWNjZXNzLXNlcnZpY2UudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luamVjdGFibGUsIGlzRGV2TW9kZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgICBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90LFxyXG4gICAgQ2FuQWN0aXZhdGUsXHJcbiAgICBDYW5BY3RpdmF0ZUNoaWxkLFxyXG4gICAgUm91dGVyLFxyXG4gICAgUm91dGVyU3RhdGVTbmFwc2hvdCxcclxuICAgIFVybFRyZWVcclxufSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5cclxuaW1wb3J0IHtBY2NvdW50U2VydmljZX0gZnJvbSAnYXBwL2NvcmUvYXV0aC9hY2NvdW50LnNlcnZpY2UnO1xyXG5pbXBvcnQge0xvZ2luTW9kYWxTZXJ2aWNlfSBmcm9tICdhcHAvY29yZS9sb2dpbi9sb2dpbi1tb2RhbC5zZXJ2aWNlJztcclxuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tIFwicnhqc1wiO1xyXG5pbXBvcnQge2NhdGNoRXJyb3IsIG1hcH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XHJcbmltcG9ydCB7ZXhpdENvZGVGcm9tUmVzdWx0fSBmcm9tIFwiQGFuZ3VsYXIvY29tcGlsZXItY2xpXCI7XHJcblxyXG5ASW5qZWN0YWJsZSh7cHJvdmlkZWRJbjogJ3Jvb3QnfSlcclxuZXhwb3J0IGNsYXNzIFVzZXJSb3V0ZUFjY2Vzc1NlcnZpY2UgaW1wbGVtZW50cyBDYW5BY3RpdmF0ZSwgQ2FuQWN0aXZhdGVDaGlsZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJvdXRlcjogUm91dGVyLCBwcml2YXRlIGxvZ2luTW9kYWxTZXJ2aWNlOiBMb2dpbk1vZGFsU2VydmljZSwgcHJpdmF0ZSBhY2NvdW50U2VydmljZTogQWNjb3VudFNlcnZpY2UpIHtcclxuICAgIH1cclxuXHJcbiAgICBjYW5BY3RpdmF0ZShyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCwgc3RhdGU6IFJvdXRlclN0YXRlU25hcHNob3QpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcclxuICAgICAgICBjb25zdCBhdXRob3JpdGllcyA9IHJvdXRlLmRhdGFbJ2F1dGhvcml0aWVzJ107XHJcbiAgICAgICAgLy8gV2UgbmVlZCB0byBjYWxsIHRoZSBjaGVja0xvZ2luIC8gYW5kIHNvIHRoZSBhY2NvdW50U2VydmljZS5pZGVudGl0eSgpIGZ1bmN0aW9uLCB0byBlbnN1cmUsXHJcbiAgICAgICAgLy8gdGhhdCB0aGUgY2xpZW50IGhhcyBhIHByaW5jaXBhbCB0b28sIGlmIHRoZXkgYWxyZWFkeSBsb2dnZWQgaW4gYnkgdGhlIHNlcnZlci5cclxuICAgICAgICAvLyBUaGlzIGNvdWxkIGhhcHBlbiBvbiBhIHBhZ2UgcmVmcmVzaC5cclxuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0xvZ2luKGF1dGhvcml0aWVzLCBzdGF0ZS51cmwpO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrTG9naW4oYXV0aG9yaXRpZXM6IHN0cmluZ1tdLCB1cmw6IHN0cmluZyk6IE9ic2VydmFibGU8Ym9vbGVhbj4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYWNjb3VudFNlcnZpY2UuaWRlbnRpdHkodHJ1ZSkucGlwZShcclxuICAgICAgICAgICAgbWFwKGFjY291bnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYXV0aG9yaXRpZXMgfHwgYXV0aG9yaXRpZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNBbnlBdXRob3JpdHkgPSB0aGlzLmFjY291bnRTZXJ2aWNlLmhhc0FueUF1dGhvcml0eShhdXRob3JpdGllcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0FueUF1dGhvcml0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGV2TW9kZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VzZXIgaGFzIG5vdCBhbnkgb2YgcmVxdWlyZWQgYXV0aG9yaXRpZXM6ICcsIGF1dGhvcml0aWVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWydhY2Nlc3NkZW5pZWQnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9sb2dpbiddKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXN1bHQuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBjYW5BY3RpdmF0ZUNoaWxkKGNoaWxkUm91dGU6IEFjdGl2YXRlZFJvdXRlU25hcHNob3QsIHN0YXRlOiBSb3V0ZXJTdGF0ZVNuYXBzaG90KTogT2JzZXJ2YWJsZTxib29sZWFuIHwgVXJsVHJlZT4gfCBQcm9taXNlPGJvb2xlYW4gfCBVcmxUcmVlPiB8IGJvb2xlYW4gfCBVcmxUcmVlIHtcclxuICAgICAgICBjb25zdCBhdXRob3JpdGllcyA9IGNoaWxkUm91dGUuZGF0YVsnYXV0aG9yaXRpZXMnXTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0xvZ2luKGF1dGhvcml0aWVzLCBzdGF0ZS51cmwpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./frontend/app/core/auth/user-route-access-service.ts\n");

/***/ })

})